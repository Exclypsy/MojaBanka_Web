{% extends "base.html" %}
{% block title %}Transakcie{% endblock %}
{% block content %}
<h1 class="mb-3 text-center">Transakcie</h1>

<form method="get" class="mx-auto mb-3" style="max-width: 450px;">
    <div class="row g-2 align-items-end">
        <div class="col-8">
            <label class="form-label">Filtrovať podľa účtu</label>
            <select class="form-select" name="cislo_uctu">
                <option value="">– všetky účty –</option>
                {% for u in ucty %}
                    <option value="{{ u.cislo_uctu }}"
                        {% if cislo_uctu and cislo_uctu|int == u.cislo_uctu %}selected{% endif %}>
                        {{ u.cislo_uctu }} – {{ u.meno }} {{ u.priezvisko }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="col-4 d-flex justify-content-end">
            <button type="submit" class="btn btn-primary w-100">Filtrovať</button>
        </div>
    </div>
</form>

{% if not transakcie %}
    <p class="text-center text-muted">Žiadne transakcie.</p>
{% else %}
<table class="table table-striped table-hover align-middle">
    <thead>
        <tr>
            <th>ID</th>
            <th>Číslo účtu</th>
            <th>Majiteľ</th>
            <th>Typ operácie</th>
            <th>Suma</th>
            <th>Popis</th>
            <th>Dátum a čas</th>
        </tr>
    </thead>
    <tbody>
        {% for t in transakcie %}
        <tr>
            <td>{{ t.id }}</td>
            <td>{{ t.cislo_uctu }}</td>
            <td>{{ t.meno }} {{ t.priezvisko }}</td>
            <td>{{ t.typ_operacie }}</td>
            <td>{{ t.suma }}</td>
            <td>{{ t.popis }}</td>
            <td>{{ t.datum_cas }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock %}
