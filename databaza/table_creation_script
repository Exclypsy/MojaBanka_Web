CREATE TABLE klient (
    id INT AUTO_INCREMENT PRIMARY KEY,
    meno VARCHAR(50) NOT NULL,
    priezvisko VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    heslo VARCHAR(255) NOT NULL,
    rola VARCHAR(20) NOT NULL  -- 'MAJITEL' alebo 'OPERATOR'
);

CREATE TABLE ucet (
    cislo_uctu INT AUTO_INCREMENT PRIMARY KEY,
    id_majitela INT NOT NULL,
    zostatok DECIMAL(10,2) NOT NULL DEFAULT 0.00,
    urok DECIMAL(5,2) NOT NULL,
    typ VARCHAR(20) NOT NULL,  -- 'BEZNE' alebo 'DOMINUSU'
    limit_precerpania DECIMAL(10,2) DEFAULT NULL,
    urok_v_minuse DECIMAL(5,2) DEFAULT NULL,
    CONSTRAINT fk_ucet_klient
        FOREIGN KEY (id_majitela) REFERENCES klient(id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS transakcia (
    id INT AUTO_INCREMENT PRIMARY KEY,
    cislo_uctu INT NOT NULL,
    typ_operacie VARCHAR(20) NOT NULL,  -- 'VKLAD', 'VYBER', 'UROK'
    suma DECIMAL(10,2) NULL,
    popis VARCHAR(255) NULL,
    datum_cas TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (cislo_uctu) REFERENCES ucet(cislo_uctu)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

